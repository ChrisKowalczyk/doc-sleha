<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE chapter PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd" [
 <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
 <!ENTITY % entities SYSTEM "entity-decl.ent">
 %entities;
]>

<!-- 
 bnc#633212

-->

<chapter id="cha.ha.acl">
  <title>Access Control Lists for Cluster Resources</title>
  <abstract>
    <para> Administrating clusters with the various tools like the crm
      shell, &hawk;, or the Python GUI can only be used by &rootuser; or
      any user who are part of the <systemitem class="groupname"
        >hacluster</systemitem> group. In some cases this may be not
        enough.</para>
    <para>With <emphasis>access control lists</emphasis> (ACLs) you can
      define rules to allow or deny access to a resource.
      Typically, rules are combined to create specific roles and users
      may be assigned a role to make access .</para>
  </abstract>
  
  <sect1 id="sec.ha.acl.require">
    <title>Requirements and Prerequisites</title>
    <para>Before you start using ACLs on your cluster, make sure the
      following conditions are fullfilled:</para>
    <itemizedlist>
      <listitem>
        <para>The same users must be available on all nodes in your
          cluster. Use NIS to ensure this.</para>
      </listitem>
      <listitem>
        <para>All users must belong to the <systemitem class="groupname"
          >hacluster</systemitem> group.</para>
      </listitem>
    </itemizedlist>
    
    <para>Furthermore, configure your cluster as follows:</para>
    <procedure>
      <step>
        <para>Configure the CIB to use the Pacemaker 1.1 or 1.2 schema:</para>
        <screen>cibadmin --modify --xml-text '&lt;cib validate-with="pacemaker-1.1"/>'</screen>
      </step>
      <step>
        <para>Set the <option>enable-acl</option> option:</para>
        <screen>crm configure property enable-acl=true</screen>
      </step>
    </procedure>
    
    <para>ACLs has the following characteristics:</para>
    <itemizedlist>
      <listitem>
        <para>User &rootuser; and users belonging to the <systemitem 
          class="groupname">hacluster</systemitem> group has always full
        access.</para>
      </listitem>
      <listitem>
        <para>Non-privileged users want to run the crm shell, they have
          to  change the <envar>PATH</envar> variable and extend it with
          <filename>/usr/sbin</filename>.
        </para>
      </listitem>
    </itemizedlist>
  </sect1>
  
</chapter>

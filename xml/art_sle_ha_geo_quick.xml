<?xml version="1.0" encoding="UTF-8"?>
<?xml-stylesheet href="urn:x-suse:xslt:profiling:docbook50-profile.xsl"
  type="text/xml" 
  title="Profiling step"?>
<!DOCTYPE article
[
  <!ENTITY % entities SYSTEM "entity-decl.ent">
    %entities;
]>
<!--taroth 2014-12-18: todo for next release: fix IDs in xincludes-->
<?provo dirname="geo_quick/"?>
<article version="5.0" xml:lang="en" xml:id="art.ha.geo.quick"
  xmlns="http://docbook.org/ns/docbook"
  xmlns:dm="urn:x-suse:ns:docmanager"
  xmlns:xi="http://www.w3.org/2001/XInclude"
  xmlns:xlink="http://www.w3.org/1999/xlink">
 <title>&geoquick;</title>
 <subtitle>&productname; &productnumber;</subtitle>
 <info>
  <productnumber>&productnumber;</productnumber>
   <productname>&productname;</productname>
   <date><?dbtimestamp?></date>
    <abstract>
    <para>
     &abstract-geoquick;
     This document guides you through the basic setup of a &geo; cluster,
     using the &geo; cluster bootstrap scripts provided by the
      <systemitem xmlns='http://docbook.org/ns/docbook'
        class='resource'>ha-cluster-bootstrap</systemitem> package.
      </para>
      <para>
        <remark>
          taroth 2017-06-22: todo - more details? restrictions?
        </remark>
      </para>
      </abstract>
      <dm:docmanager>
        <dm:bugtracker>
          <dm:url>https://bugzilla.suse.com/enter_bug.cgi</dm:url>
          <dm:product>SUSE Linux Enterprise High Availability Extension 12 SP3</dm:product>
          <dm:component>GEO Clustering</dm:component>
        </dm:bugtracker>
        <dm:translation>yes</dm:translation>
      </dm:docmanager>
 </info>
  <sect1 xml:id="sec.ha.geo.quick.scenario">
    <title>Usage Scenario</title>
    <para>
      &geo; clusters based on &productname; can be considered
      <quote>overlay</quote> clusters where each cluster site corresponds to a
      cluster node in a traditional cluster. The overlay cluster is managed by
      the booth mechanism. It guarantees that the cluster resources will be
      highly available across different cluster sites. This is achieved by using
      cluster objects called tickets that are treated as failover domain between
      cluster sites, in case a site should be down. Booth guarantees that every
      ticket is granted to no more than one site at a time.
    </para>
    <para>
      The procedures in this document will lead to an example setup of a
      &geo; cluster with the following properties:
    </para>
    <example>
      <title>Example Setup of a &geo; Cluster</title>
      <para> A &geo; cluster with two sites,
          <literal>&cluster1;</literal> and
          <literal>&cluster2;</literal>, including one arbitrator. </para>
    </example>
    <para>
      Currently, the &geo; cluster bootstrap script only takes care of setting up
      booth and of creating the minimum set of resources that booth needs.
      <remark>taroth 2017-06-26:
        add link to description of bootstrap scripts</remark>
    </para>
    <para>
      In addition, you need to take the following steps to get a functioning
      &geo; cluster:
      <remark>taroth 2017-06-26: @krig, could you help to provide a list of things that
        the admin needs to execute before/after running the init scripts (in order
        to get a functioning geo cluster)?</remark>
    </para>
  </sect1>
  <sect1 xml:base="sec.ha.geo.quick.req">
    <title>Requirements</title>
    <para>
      <remark>taroth 2017-06-27: todo - for future, use phrases entities like
      in Install Quick</remark>
    </para>
     <itemizedlist>
      <title>Software Requirements</title>
      <listitem>
        <para>
          All clusters that will be part of the &geo; cluster must be based on
          &productname; &productnumber;.
        </para>
      </listitem>
      <listitem>
        <para>
          &slsreg; &productnumber; must be installed on all arbitrators.
        </para>
      </listitem>
      <listitem>
        <para>
          &hageo; must be installed on all cluster nodes
          <emphasis>and</emphasis> on all arbitrators that will be part of the
          &geo; cluster.
          <!--<remark>taroth 2014-08-20: booth package would be enough (GEO pattern only consists of the booth
            package) but to make it clear where to get the package from, phrasing like this</remark>-->
        </para>
      </listitem>
    </itemizedlist>
    
    <itemizedlist>
      <title>Network Requirements</title>
      <listitem>
        <para>
          Each site has a private network routed to the other site:
        </para>
        <itemizedlist>
          <listitem>
            <para>
              &cluster1;: <literal>192.168.201.x</literal>
            </para>
          </listitem>
          <listitem>
            <para>
              &cluster2;: <literal>192.168.202.x</literal>
            </para>
          </listitem>
        </itemizedlist>
      </listitem>
      <listitem>
        <para>
          The sites must be reachable on one UDP and TCP port per booth instance.
          That means any firewalls or IPsec tunnels in between must be configured
          accordingly.
        </para>
      </listitem>
      <listitem>
        <para>
          Other setup decision may require to open more ports (for example, for
          DRBD or database replication).
        </para>
      </listitem>
    </itemizedlist>
    
    <itemizedlist>
      <title>Other Requirements and Recommendations</title>
      <listitem>
        <para>
          All cluster nodes on all sites should synchronize to an NTP server
          outside the cluster. For more information, see the
          <citetitle>&admin;</citetitle> for &sls; &productnumber;,
          available at <link xlink:href="http://www.suse.com/documentation/"/>. Refer to the chapter <citetitle>Time
            Synchronization with NTP</citetitle>.
        </para>
        <para>
          If nodes are not synchronized, log files and cluster reports are very
          hard to analyze.
        </para>
      </listitem>
      <listitem>
        <para>The cluster on each site has a meaningful name, for example:
          <literal>&cluster1;</literal> and
          <literal>&cluster2;</literal>.
        </para>
        <para>
          The cluster names for each site are defined in the respective &corosync.conf; files:
        </para>
        <screen>totem {
          [...]
          cluster_name: &cluster1;
          }
        </screen>
        <para>This can either be done manually (by editing &corosync.conf;) or with the
          &yast; cluster module (by switching to the <guimenu>Communication Channels</guimenu>
          category and defining a <guimenu>Cluster Name</guimenu>).
          Afterward, restart the &pace; service for the changes to take effect.
        </para>
      </listitem>
    </itemizedlist>
  </sect1>
 <xi:include href="geo_scripts_i.xml"/>
 <xi:include href="geo_install_i.xml"/>
 <!--<xi:include href="geo_overview_i.xml"/>-->
 <!--<xi:include href="geo_setup_i.xml"/>-->
 <xi:include href="geo_resources_i.xml"/>
 <xi:include href="common_legal.xml"/>
</article>

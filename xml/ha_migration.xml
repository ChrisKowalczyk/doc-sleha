<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE appendix PUBLIC "-//Novell//DTD NovDoc XML V1.0//EN" "novdocx.dtd" [
 <!ENTITY % NOVDOC.DEACTIVATE.IDREF "INCLUDE">
 <!ENTITY % entities SYSTEM "entity-decl.ent">
 %entities;
]>
<appendix id="app.ha.migration">
 <title>Upgrading Your Cluster to the Latest Product Version</title>
 <para>For upgrading clusters from &productnamereg; 11 to
  &productname; 12, all cluster nodes must be offline and
  the cluster needs to be migrated as a whole. Mixed clusters running on
  &productname; 11/&productname; 12 are not supported.</para>
 <para>Which upgrade path is supported and how to best perform the upgrade
  depends on the current product version of your cluster  and the target version
  you want to migrate the cluster to. For more information about 
 </para>
 

 <sect1 id="sec.ha.migration.sle12">
  <title>Upgrading from SLE&nbsp;HA&nbsp;11 SP3 to
   SLE&nbsp;HA&nbsp;12</title>

  <para>In order to successfully upgrade to &productname; 12, your cluster
   needs to run the latest versions of &sls; and &productname;
   (11&nbsp;SP3). If your cluster is still based on an older product
   version, upgrade it to &sls; and &productname; 11&nbsp;SP3 first.
   </para>

  <para>Due to major changes in various components of the &hasi; 12 (for
   example, &corosync.conf;, disk formats of OCFS2), performing a
    <literal>rolling upgrade</literal> is not supported for this scenario. All
   cluster nodes must be offline and the cluster needs to be migrated as a
   whole.</para>

  <important>
   <title>Required Preparations Before Upgrading</title>
   <itemizedlist>
    <listitem>
     <para>Ensure that your system back-up is up to date and restorable.</para>
    </listitem>
    <listitem>
     <para>Test the upgrade procedure on a staging instance of your cluster
      setup (before executing it in a production environment). </para>
     <para>This gives you an estimation of the time frame required for the
      maintenance window. It also helps to detect and solve any unexpected
      problems that might arise .</para>
    </listitem>
   </itemizedlist>
  </important>
  
  <!--<procedure>
    <step>
     <para>Log in to each cluster </para>
    </step>
    
   <step id="step.ha.migration.upgrade.tolatest">
    <para>Perform an upgrade from &sls; 11 to &sls; 11&nbsp;SP1 and
     from &productname; 11 to &productname; 11&nbsp;SP1.
     <!-\-  <remark>taroth 090512:
     need to use hard-coded link here as the target is not included in the same
     set</remark>-\->
     For information on how to upgrade your product, refer to the <citetitle>&sls;&nbsp;12
     &deploy;</citetitle>, chapter <citetitle>Updating
      &sle;</citetitle>. </para>
   </step>
   <step id="step.ha.migration.upgrade.ais">
    <para> Restart &ais;/&corosync; on the upgraded node to make the
     node rejoin the cluster: </para>
    <screen>rcopenais&nbsp;start</screen>
   </step>
   <step>
    <para> Take the next node offline and repeat the procedure for that node.
    </para>
   </step>
  </procedure>

  <para> After the conversion has been successfully completed, you can bring the
   upgraded cluster online again. </para>-->

  <note>
   <title>Reverting after Upgrade</title>
   <para>After the upgrade process to product version 12, reverting back to
    product version 11 is <emphasis>not</emphasis> supported. </para>
  </note>


 </sect1>

<!--   <important>
<!-\-https://bugzilla.novell.com/show_bug.cgi?id=573817#c6-\->
    <title>Updating Software Packages</title>
    <para>
     If you want to update any software packages on a node that is part of a
     running cluster, stop the cluster stack on that node before starting
     the software update.
    </para>
    <para>
     If &ais;/&corosync; is running during the software update, this can
     lead to unpredictable results like fencing of active nodes.
    </para>
   </important>-->
 

  <!--<important>
   <title>Time Limit for Rolling Upgrade</title>
   <para>
    The new features shipped with &productname; ??? will only be
    available after <emphasis>all</emphasis> cluster nodes have been
    upgraded to the latest product version. Mixed SP1/SP2 clusters are only
    supported for a short time frame during the rolling upgrade. Complete
    the rolling upgrade within one week.
   </para>
  </important>-->
 <sect1 id="sec.ha.migration.more">
  <title>For More Information</title>

  <para>
   For detailed information about any changes and new features of the
   product you are upgrading to, refer to its release notes. They are
   available from <ulink url="https://www.suse.com/releasenotes/"/>.
  </para>
 </sect1>
</appendix>
